[{"title":"Docker + Nginxéƒ¨ç½²å‰ç«¯é¡¹ç›®","url":"/2024/05/10/Docker-Nginx%E9%83%A8%E7%BD%B2%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE/","content":"Docker + Nginxéƒ¨ç½²å‰ç«¯é¡¹ç›®\n\n","tags":["Docker"]},{"title":"GitHub Actions & Dockerå®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²","url":"/2024/05/10/GitHub-Actions-Docker%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/","content":"\næ•™ç¨‹ï¼šGitHub Actionså·¥ä½œæµè‡ªåŠ¨åŒ–çš„å…¥é—¨æ ¸å¿ƒ_å“”å“©å“”å“©_bilibili\n\nGitHub Actions + Dockerå®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²SpringBootå¤šç¯å¢ƒåˆ‡æ¢\nå‚è€ƒ: 31 SpringBootå¤šç¯å¢ƒçš„åˆ‡æ¢(ç”Ÿäº§ç¯å¢ƒã€å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒ)_spring bootç”Ÿäº§å’Œå¼€å‘ç¯å¢ƒ-CSDNåšå®¢\n\n\nåœ¨resources/ä¸‹åˆ›å»ºapplication-dev.yamlå’Œapplication-prouct.yamlæ–‡ä»¶ï¼Œåˆ†åˆ«è¡¨ç¤ºå¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒã€‚\n\nåœ¨ä¸¤ä»½é…ç½®æ–‡ä»¶ä¸­åˆ†åˆ«è‡ªå®šä¹‰é…ç½®ï¼Œä¾‹å¦‚ï¼š\n \n\nåœ¨application.yamlæ–‡ä»¶ä¸­å¼•ç”¨ï¼š\n \n\næ¿€æ´»é…ç½®æ–‡ä»¶ï¼š\n\né…ç½®æ–‡ä»¶ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šspring.profiles.active=dev\nè™šæ‹Ÿæœºå‚æ•°ï¼šåœ¨VM optionsæŒ‡å®š -Dspring.profiles.active=dev\nå‘½ä»¤è¡Œå‚æ•°ï¼šjava -jar xxx.jar â€“spring.profiles.active=dev\n\n\n\nIDEAä¸­ä½¿ç”¨ç¬¬äºŒç§å³å¯ï¼Œéƒ¨ç½²æ—¶ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°æŒ‡å®šã€‚\nDockerfileæ–‡ä»¶ç¼–å†™åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œæ–°å»ºDockerfileï¼Œå†…å®¹å¦‚ä¸‹ï¼š\nFROM fabric8/java-alpine-openjdk11-jreENV TZ=Asia/ShanghaiRUN rm -f /etc/localtime \\&amp;&amp; ln -sv /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \\&amp;&amp; echo \"Asia/Shanghai\" &gt; /etc/timezoneCOPY target/*.jar /app.jarENTRYPOINT [\"java\",\"-jar\",\"/app.jar\", \"--spring.profiles.active=product\"]\n\næ³¨æ„ï¼šæœ€åä¸€è¡ŒæŒ‡å®šäº†é…ç½®æ–‡ä»¶ã€‚\nworkflowæ–‡ä»¶ç¼–å†™ä»¥ä¸‹ä¸¤ç§æ–¹å¼äºŒé€‰ä¸€å³å¯ã€‚\nä½¿ç”¨GitHubæä¾›çš„Ubuntuç¯å¢ƒåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œæ–°å»º./github/workflows/delpoy.ymlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n# ä½¿ç”¨Github Actionsè‡ªåŠ¨éƒ¨ç½²Spring Booté¡¹ç›®åˆ°æœåŠ¡å™¨name: Deploy With Dockeron:  push:    branches: [ master ]jobs:  build:    name: Buildå·¥ä½œ    runs-on: ubuntu-latest # ä½¿ç”¨GitHubæä¾›çš„Ubuntuç¯å¢ƒ    steps:      - name: è¯»å–ä»“åº“å†…å®¹        uses: actions/checkout@v4      - name: è®¾ç½®Javaç¯å¢ƒ        uses: actions/setup-java@v4        with:          java-version: 11          distribution: 'adopt'          cache: 'maven'      #      - name: ç¼“å­˜Mavenä¾èµ–      #        uses: actions/cache@v3      #        with:      #          path: ~/.m2/repository      #          key: ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}      #          restore-keys: |      #            ${{ runner.os }}-maven-      - name: ç¼–è¯‘æ‰“åŒ…        run: mvn package -Dmaven.test.skip=true      - name: ç™»å½•åˆ°DockerHub        uses: docker/login-action@v3        with:          username: ${{ secrets.DOCKER_USERNAME }}          password: ${{ secrets.DOCKER_PASSWORD }}      - name: æ„å»ºDockeré•œåƒ        uses: docker/build-push-action@v5        with:          context: .          file: ./Dockerfile          push: true          tags: ${{ secrets.DOCKER_USERNAME }}/project-name:latest      - name: éƒ¨ç½²åˆ°æœåŠ¡å™¨        uses: appleboy/ssh-action@master        with:          host: ${{ secrets.SERVER_HOST }}          username: ${{ secrets.SERVER_USERNAME }}          port: ${{ secrets.SERVER_PORT }}          password: ${{ secrets.SERVER_PASSWORD }}          script: |            sh /path/to/delpoy.sh\n\nproject-nameè®°å¾—æ›¿æ¢ä¸ºè‡ªå·±çš„é¡¹ç›®åç§°\nå…¶ä¸­deploy.shè„šæœ¬å†…å®¹å¦‚ä¸‹ï¼ˆè®°å¾—æ›¿æ¢{{}}ä¸­å†…å®¹ï¼Œç«¯å£è®°å¾—æŒ‰éœ€ä¿®æ”¹ï¼‰ï¼š\ndocker pull {{username}}/{{project-name}}:latestdocker tag docker.io/{{username}}/{[project-name]}:latest {{project-name}}:latestdocker rm -f {{project-name}}docker run --name {{project-name}} -p 1002:8081 -d {{project-name}}:latestdocker image prune -af\n\nDockerHubè®°å¾—å…ˆæ³¨å†Œè´¦å·ã€‚å¦‚æœDockerhubä¸Šä¼ çš„æ˜¯ç§å¯†é•œåƒï¼Œè®°å¾—åœ¨æœåŠ¡å™¨ç™»å½•è´¦å·ï¼šdocker login\nåœ¨GitHubé¡¹ç›®è®¾ç½®ä¸­æ·»åŠ ymlæ–‡ä»¶ä¸­çš„secretsï¼Œä½ç½®å¦‚ä¸‹ï¼š\n\nä½¿ç”¨è‡ªå·±çš„æœåŠ¡å™¨\næ·»åŠ Runner\n \n\né€‰æ‹©æœåŠ¡å™¨å¯¹åº”ç³»ç»Ÿï¼ŒæŒ‰ç…§æ‰€ç¤ºæ­¥éª¤åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œå³å¯ï¼š\n \n å…¶ä¸­ï¼Œè¿è¡Œconfig.shè„šæœ¬è®°å¾—ä½¿ç”¨érootç”¨æˆ·ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚\n å…¶æ¬¡./run.shå‘½ä»¤æ”¹ä¸ºnohup ./run.sh &amp;åœ¨åå°ä¸æŒ‚æ–­è¿è¡Œã€‚\n\nåœ¨æœåŠ¡å™¨è®°å¾—å®‰è£…mavenå’ŒJava\n sudo apt updatesudo apt install mavenmvn --version # éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ\n\n\nå‚è€ƒï¼šå¦‚ä½•åœ¨ Ubuntu 20.04 ä¸Šå®‰è£… Apache Maven-è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘\n\n\nåœ¨é¡¹ç›®åˆ›å»ºworkflowæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n name: Deploy With Runneron:  push:    branches: [ master ]jobs:  build:    name: Buildå·¥ä½œ    runs-on: self-hosted # ä½¿ç”¨è‡ªå·±çš„æœåŠ¡å™¨    steps:      - name: è¯»å–ä»“åº“å†…å®¹        uses: actions/checkout@v4      - name: è®¾ç½®Javaç¯å¢ƒ        run: |          pwd          java --version          mvn --version      - name: ç¼–è¯‘æ‰“åŒ…        run: mvn package -Dmaven.test.skip=true      - name: æ„å»ºDockeré•œåƒ        run: |          docker build -f Dockerfile -t {{project-name}}:latest .      - name: éƒ¨ç½²åˆ°æœåŠ¡å™¨        run: |          docker rm -f {{project-name}          docker run -d --name {{project-name}} -p 1002:8080 {{project-name}}:latest          docker ps\n\n ç«¯å£è®°å¾—æŒ‰éœ€ä¿®æ”¹\n\n\n\n\nå¼€å§‹è‡ªåŠ¨åŒ–éƒ¨ç½²å°†ä»£ç æäº¤åˆ°GitHubåï¼Œåœ¨GitHubçš„Actionså°±ä¼šå‘ç°æ­£åœ¨è‡ªåŠ¨åŒ–éƒ¨ç½²ã€‚\nå‚è€ƒ\nä½¿ç”¨Github Actions + Docker éƒ¨ç½²Spring Bootåº”ç”¨ - æ˜é‡‘\nGithub Actionså®ç°Spring Bootè‡ªåŠ¨åŒ–éƒ¨ç½²ï¼ˆç¬¬äºŒå¼¹ï¼‰_JavaGPTçš„æŠ€æœ¯åšå®¢_51CTOåšå®¢\n\n","tags":["Docker","GitHub"]},{"title":"Springï¼šIoC&DI æ§åˆ¶åè½¬å’Œä¾èµ–æ³¨å…¥","url":"/2024/01/30/Spring%EF%BC%9AIoC-DI-%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC%E5%92%8C%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/","content":"é«˜å†…èšï¼Œä½è€¦åˆè½¯ä»¶å¼€å‘éœ€è¦éµå¾ªé«˜å†…èšã€ä½è€¦åˆçš„åŸåˆ™ã€‚\n\né«˜å†…èšæŒ‡çš„æ˜¯ï¼šä¸€ä¸ªæ¨¡å—ä¸­å†…éƒ¨çš„å„ä¸ªå…ƒç´ ä¹‹é—´çš„è”ç³»ç´§å¯†ç¨‹åº¦é«˜ã€‚\nä½è€¦åˆæŒ‡çš„æ˜¯ï¼šè½¯ä»¶ä¸­å„ä¸ªæ¨¡å—é—´çš„ä¾èµ–å…³ç³»è¶Šä½è¶Šå¥½ã€‚\n\nç»å…¸çš„MVCä¸‰å±‚æ¶æ„å°†ç¨‹åºåˆ†ä¸ºäº†ä¸‰å±‚ï¼š\n\næ•°æ®è®¿é—®å±‚ DAOå±‚ï¼šè´Ÿè´£ä¸æ•°æ®åº“è¿›è¡Œäº¤äº’\nä¸šåŠ¡é€»è¾‘å±‚ Serviceå±‚ï¼šè´Ÿè´£å¤„ç†ä¸šåŠ¡é€»è¾‘\nè¯·æ±‚å¤„ç†å±‚ Controllerå±‚ï¼šè´Ÿè´£æ¥æ”¶è¯·æ±‚ã€å“åº”æ•°æ®ã€‚\n\nåœ¨è¿™ç§æ¶æ„ä¸‹ï¼Œä¸€ä¸ªç±»åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜äº†å†…èšã€é™ä½äº†è€¦åˆã€‚\nä½†æ˜¯ä¼ ç»Ÿå¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç±»çš„å†…éƒ¨ä¸»åŠ¨åˆ›å»ºä¾èµ–å¯¹è±¡ï¼Œä¾‹å¦‚åœ¨ä¸‰å±‚æ¶æ„ä¸­ï¼ŒServiceå±‚ä¸­éœ€è¦åˆ›å»ºDaoå±‚çš„å¯¹è±¡ï¼ŒControllerå±‚éœ€è¦åˆ›å»ºServiceå±‚å¯¹è±¡ã€‚\nè¿™æ ·å¯¼è‡´äº†ç±»ä¸ç±»ä¹‹é—´çš„è€¦åˆï¼Œéš¾ä»¥æµ‹è¯•ï¼ŒIoC ï¼ˆInversion of Control, æ§åˆ¶åè½¬)è¿™ç§è®¾è®¡æ€æƒ³å°±æ˜¯ä¸ºäº†é™ä½è¿™ç§è€¦åˆæ€§ã€‚\nInversion of ControlIoCæ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼Œå°†åˆ›å»ºå’ŒæŸ¥æ‰¾ä¾èµ–å¯¹è±¡çš„æ§åˆ¶æƒäº¤ç»™å®¹å™¨ï¼Œç”±å®¹å™¨è¿›è¡Œç®¡ç†ã€‚\n","tags":["java","Spring"]},{"title":"GitHub Pages & Hexo æ­å»ºåšå®¢","url":"/2023/08/28/GitHub-Pages-Hexo-%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/","content":"GitHub Pages &amp; Hexo æ­å»ºåšå®¢Hexo å®‰è£…ä¸é…ç½®\nHexo å®‰è£…ä¸é…ç½® | Easy Hexo ğŸ‘¨â€ğŸ’»\n\n\nç¡®è®¤æœ¬åœ°å·²ç»å®‰è£… Git å’Œ Node.js\nå®‰è£…hexo: npm install -g hexo-cli\nåœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç„¶åå¾€è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­å®‰è£…Hexo\né…ç½® Hexoï¼Œå…¶é…ç½®æ–‡ä»¶ä¸º_config.ymlï¼šé…ç½® Hexo | Easy Hexo ğŸ‘¨â€ğŸ’»\n\nnpm install -g hexo-cli # å®‰è£…Hexomkdir mkdir &lt;your_blog_name&gt;  # å»ºç«‹ä½ çš„ç½‘ç«™æ ¹ç›®å½•ï¼Œåå­—å¯ä»¥è‡ªå·±ä¿®æ”¹hexo init &lt;your_blog_name&gt; # å¾€è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­å®‰è£…Hexo\n\nHexoçš„keepä¸»é¢˜å®‰è£…ä¸é…ç½®\nKeep ä¸»é¢˜ä½¿ç”¨æŒ‡å— | Hexo ä¸»é¢˜ Keep å®˜æ–¹æ–‡æ¡£ &amp;&amp; XPoetâ€™s Blog\n\nStep 1: å®‰è£…Keepä¸»é¢˜\ncd &lt;your_blog_name&gt;npm install hexo-theme-keep\n\nStep 2: ä½¿ç”¨Keepä¸»é¢˜ï¼šåœ¨ Hexo é…ç½®æ–‡ä»¶_config.yml ä¸­å°† theme è®¾ç½®ä¸º keepã€‚\ntheme: keep\n\nStep 3ï¼šé…ç½®Keepä¸»é¢˜ï¼šåœ¨æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ª_config.keep.ymlæ–‡ä»¶ï¼Œå‚ç…§æ–‡æ¡£è¿›è¡Œé…ç½®ï¼šbase_info | Keep ä¸»é¢˜ä½¿ç”¨æŒ‡å—\nå…¶ä»–ï¼š\n\nå¯èƒ½ç”¨åˆ°çš„å‘½ä»¤ï¼š\n  npm install hexo-theme-keep # å®‰è£… keep ä¸»é¢˜npm install hexo-filter-mathjax # å®‰è£…æ˜¾ç¤ºæ•°å­¦å…¬å¼çš„æ’ä»¶npm install hexo-generator-searchdb # å®‰è£…ç«™å†…æœç´¢æ’ä»¶hexo new page about # hexoåˆ›å»ºé¡µé¢å‘½ä»¤ï¼Œä½¿ç”¨è¯¥å‘½ä»¤åˆ›å»ºabouté¡µé¢ã€‚\n\næ•°å­¦å…¬å¼ | Keep ä¸»é¢˜ä½¿ç”¨æŒ‡å—ï¼šå»ºè®®å¼€å¯ã€‚\n\né…ç½®æ—¶çš„å›¾æ ‡æ–‡ä»¶å¯ä»¥æ”¾åœ¨source/imagesæ–‡ä»¶å¤¹ä¸­ã€‚\n\n\nä½¿ç”¨GitHub Pageséƒ¨ç½²åˆ°GitHub\néƒ¨ç½² Hexo | Easy Hexo ğŸ‘¨â€ğŸ’»\n\nStep 1: åˆ›å»ºä¸€ä¸ªä»“åº“ï¼š.github.io\nStep 2: åœ¨ï¼ˆ.github.ioï¼‰å®‰è£…éƒ¨ç½²æ’ä»¶\nnpm install hexo-deployer-git --savenpm install hexo-server --save\n\nStep 3: éƒ¨ç½²åˆ° GitHub\nhexo clean &amp;&amp; hexo d -g\n\nGitHubä¿å­˜åšå®¢é¡¹ç›®çš„æºä»£ç # æœ¬åœ°åšå®¢é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œgit initgit checkout -b hexo # åˆ‡æ¢åˆ†æ”¯git add .git commit -m \"init\"git remote add origin git@github.com:isJinHu/isjinhu.github.io.git # æ·»åŠ è¿œç¨‹ä»“åº“git remote -vgit push origin hexo:hexo # pushåˆ°è¿œç¨‹ä»“åº“çš„hexoåˆ†æ”¯\n\nå…¶ä»–\nhexo new &lt;artical_name&gt;åˆ›å»ºä¸€ç¯‡æ–°æ–‡ç« \n\nGitalkè®¾ç½®ï¼šcomment | Keep ä¸»é¢˜ä½¿ç”¨æŒ‡å—\n\n/scaffolds/post.md: ä¿®æ”¹postæ¨¡æ¿ï¼Œå¯ä»¥è®¾ç½®é»˜è®¤æ‰“å¼€æ•°å­¦å…¬å¼æ¸²æŸ“ç­‰\n\n\n  title: {{ title }}date: {{ date }}mathjax: truetags:\n\nHexo deployå¤±è´¥ï¼Ÿ\næ‰§è¡ŒHexo dæŠ¥é”™Spawn failedï¼Œ ä»¥åŠOpenSSL SSL_read: Connection was reset, errno 10054_copying files from extend dirsâ€¦warning: in the w_Candle_lightçš„åšå®¢-CSDNåšå®¢\n\nhexo config deploy.repository git@github.com:isjinhu/isjinhu.github.io.git\n\n","tags":["GitHub","Hexo"]},{"title":"Hello World","url":"/2023/08/26/hello-world/","content":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.\nQuick StartCreate a new post$ hexo new &quot;My New Post&quot;\n\nMore info: Writing\nRun server$ hexo server\n\nMore info: Server\nGenerate static files$ hexo generate\n\nMore info: Generating\nDeploy to remote sites$ hexo deploy\n\nMore info: Deployment\n","tags":["Hexo"]}]